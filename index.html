<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Pro 100 å°ˆæ¥­æ±ºç­–ç³»çµ± (æˆäº¤é‡æ¬Šé‡ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'JetBrains Mono', sans-serif; }
        .blink-border { animation: blink 1.5s infinite; }
        @keyframes blink { 0% { border-color: #ef4444; box-shadow: 0 0 10px #ef4444; } 50% { border-color: #475569; box-shadow: none; } 100% { border-color: #ef4444; box-shadow: 0 0 10px #ef4444; } }
        .tier-1 { border-left: 4px solid #eab308; background: rgba(234, 179, 8, 0.05); }
    </style>
</head>
<body class="bg-black text-slate-100 p-4 md:p-8">

    <header class="max-w-7xl mx-auto mb-8 border-b-2 border-yellow-500 pb-4 flex justify-between items-center">
        <div>
            <h1 class="text-3xl font-black text-yellow-500">PRO TRADER 100</h1>
            <p class="text-slate-400 text-xs mt-1">è‡ªå‹•æ¬Šé‡æ’åºï¼šå„ªå…ˆé¡¯ç¤ºå‰ 20 å¤§äº¤æ˜“é‡è³‡ç”¢</p>
        </div>
        <div id="status" class="bg-slate-900 px-4 py-2 rounded border border-slate-700 text-[10px]">
            <span id="progress-text">åˆå§‹åŒ–ä¸­...</span>
            <div class="w-24 h-1 bg-gray-800 mt-1 rounded-full"><div id="progress-bar" class="h-full bg-yellow-500 w-0 transition-all"></div></div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto">
        <section id="trading-rules" class="mb-10 bg-slate-900 border-l-8 border-yellow-600 p-6 rounded-r-xl">
            <h2 class="text-xl font-extrabold text-yellow-500 mb-4 tracking-tighter">âš ï¸ äº¤æ˜“è»è¦ï¼šæ–°æ‰‹ä¿å‘½ç¬¦</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-xs text-slate-400">
                <div class="p-3 bg-black/50 rounded border border-slate-800">
                    <b class="text-yellow-500 block mb-1 underline">1. ç„¡è¨Šè™Ÿä¸é€²å ´</b> åªåœ¨ã€Œé€²å ´å»ºè­°ã€å‡ºç¾æ™‚æ“ä½œã€‚
                </div>
                <div class="p-3 bg-black/50 rounded border border-slate-800">
                    <b class="text-red-500 block mb-1 underline">2. åš´æ ¼åŸ·è¡Œåœæ</b> è·Œç ´æ¨™è¨»çš„åœæåƒ¹ï¼Œ1ç§’éƒ½ä¸è¦çŒ¶è±«ï¼Œç«‹åˆ»è³£ã€‚
                </div>
                <div class="p-3 bg-black/50 rounded border border-slate-800">
                    <b class="text-blue-500 block mb-1 underline">3. å„ªå…ˆå‰20å</b> äº¤æ˜“é‡å¤§çš„å¹£ç¨®æœ€å®‰å…¨ï¼Œå°å¹£è«‹è¼•å€‰ã€‚
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-6 flex items-center text-red-500">
                ğŸš€ å³æ™‚é€²å ´å»ºè­° <span class="ml-3 text-xs font-normal text-slate-500">åŸºæ–¼ RSI & Bollinger & Volume</span>
            </h2>
            <div id="top-picks" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div>
            <div id="no-signal" class="hidden bg-slate-900/50 p-10 rounded-xl text-center text-slate-600 border border-dashed border-slate-800">ç›®å‰æš«ç„¡ç¬¦åˆæ¢ä»¶çš„å®Œç¾é€²å ´é»</div>
        </section>

        <section>
            <h2 class="text-xl font-bold mb-4 text-slate-200">ğŸ“Š å¸‚å ´ç›£æ§æ¸…å–® (å‰ 100 å)</h2>
            <div class="bg-slate-900 rounded-xl overflow-hidden border border-slate-800">
                <table class="w-full text-left">
                    <thead class="bg-slate-800 text-xs text-slate-400">
                        <tr>
                            <th class="p-4">æ’å / å¹£ç¨®</th>
                            <th class="p-4">ç•¶å‰åƒ¹æ ¼</th>
                            <th class="p-4">RSI æŒ‡æ¨™</th>
                            <th class="p-4">å°ˆå®¶æ±ºç­–</th>
                            <th class="p-4 text-right">ç›®æ¨™å‡ºå ´åƒ¹</th>
                        </tr>
                    </thead>
                    <tbody id="market-list" class="divide-y divide-slate-800 font-mono text-xs"></tbody>
                </table>
            </div>
        </section>
    </main>

    <script>
        async function analyze() {
            const list = document.getElementById('market-list');
            const picks = document.getElementById('top-picks');
            const rules = document.getElementById('trading-rules');
            const prog = document.getElementById('progress-bar');
            
            try {
                const tickerRes = await fetch('https://api.binance.com/api/v3/ticker/24hr');
                const allData = await tickerRes.json();
                const top100 = allData
                    .filter(d => d.symbol.endsWith('USDT'))
                    .sort((a, b) => parseFloat(b.quoteVolume) - parseFloat(a.quoteVolume))
                    .slice(0, 100);

                list.innerHTML = '';
                picks.innerHTML = '';
                let hasSignal = false;

                for (let i = 0; i < top100.length; i++) {
                    const coin = top100[i];
                    prog.style.width = `${(i+1)}%`;
                    document.getElementById('progress-text').innerText = `æƒæä¸­: ${coin.symbol}`;

                    try {
                        const kRes = await fetch(`https://api.binance.com/api/v3/klines?symbol=${coin.symbol}&interval=1h&limit=30`);
                        const kData = await kRes.json();
                        const closes = kData.map(d => parseFloat(d[4]));
                        const price = closes[closes.length - 1];
                        
                        const rsi = calcRSI(closes);
                        const bbLow = calcBBLow(closes);

                        const isTop20 = i < 20;
                        const isBuy = rsi < 30 && price <= bbLow;
                        const isSell = rsi > 70;

                        if (isBuy) {
                            hasSignal = true;
                            picks.innerHTML += `
                                <div class="bg-slate-800 border-t-4 ${isTop20 ? 'border-yellow-500' : 'border-green-500'} p-5 rounded-lg shadow-xl">
                                    <div class="flex justify-between font-black text-xl mb-3">
                                        <span>${coin.symbol}</span>
                                        ${isTop20 ? '<span class="text-[10px] bg-yellow-500 text-black px-1 rounded">ğŸ’ TOP 20</span>' : ''}
                                    </div>
                                    <div class="space-y-1 text-xs">
                                        <p class="text-green-400">è²·å…¥: $${price}</p>
                                        <p class="text-white">åœåˆ©: $${(price * 1.04).toFixed(4)}</p>
                                        <p class="text-red-500">åœæ: $${(price * 0.97).toFixed(4)}</p>
                                    </div>
                                </div>`;
                        }

                        list.innerHTML += `
                            <tr class="${isTop20 ? 'tier-1' : ''} ${isBuy ? 'bg-green-900/30' : ''}">
                                <td class="p-4">
                                    <span class="text-slate-500 mr-2">#${String(i + 1).padStart(2, '0')}</span>
                                    <span class="font-bold ${isTop20 ? 'text-yellow-500' : 'text-blue-300'}">${coin.symbol}</span>
                                </td>
                                <td class="p-4">$${price}</td>
                                <td class="p-4 ${rsi < 35 ? 'text-green-400' : ''}">${rsi.toFixed(1)}</td>
                                <td class="p-4 font-bold ${isBuy ? 'text-green-400' : (isSell ? 'text-red-500' : 'text-slate-600')}">
                                    ${isBuy ? 'å»ºè­°é€²å ´' : (isSell ? 'å»ºè­°æ¸›ç¢¼' : 'æŒå¹£è§€æœ›')}
                                </td>
                                <td class="p-4 text-right text-slate-400">$${(price * 1.04).toFixed(2)}</td>
                            </tr>`;
                    } catch (e) { console.warn(e); }
                }

                document.getElementById('no-signal').classList.toggle('hidden', hasSignal);
                rules.className = hasSignal ? "mb-10 bg-slate-900 border-l-8 border-red-600 p-6 rounded-r-xl blink-border" : "mb-10 bg-slate-900 border-l-8 border-yellow-600 p-6 rounded-r-xl";
                document.getElementById('progress-text').innerText = "æ›´æ–°å®Œæˆ: " + new Date().toLocaleTimeString();

            } catch (err) { console.error(err); }
        }

        function calcRSI(prices, p=14) {
            let g=0, l=0;
            for(let i=prices.length-p; i<prices.length; i++) {
                let d = prices[i]-prices[i-1];
                d >= 0 ? g+=d : l-=d;
            }
            return 100 - (100 / (1 + (g/p)/(l/p)));
        }

        function calcBBLow(prices, p=20) {
            const s = prices.slice(-p);
            const m = s.reduce((a,b)=>a+b)/p;
            const d = Math.sqrt(s.map(x=>Math.pow(x-m,2)).reduce((a,b)=>a+b)/p);
            return m - (d * 2);
        }

        analyze();
        setInterval(analyze, 300000); 
    </script>
</body>
</html>
